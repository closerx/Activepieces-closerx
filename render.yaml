# render.yaml (لخيار Blueprints إن وجد)
services:
  - type: web
    name: activepieces
    env: docker
    docker:
      dockerfile: Dockerfile
    envVars:
      - key: AP_ENVIRONMENT
        value: prod
      - key: AP_DB_TYPE
        value: POSTGRES
      - key: AP_POSTGRES_HOST
        fromDatabase:
          name: activepieces-db
          property: host
      - key: AP_POSTGRES_PORT
        value: 5432
      - key: AP_POSTGRES_USERNAME
        fromDatabase:
          name: activepieces-db
          property: user
      - key: AP_POSTGRES_PASSWORD
        fromDatabase:
          name: activepieces-db
          property: password
      - key: AP_POSTGRES_DATABASE
        fromDatabase:
          name: activepieces-db
          property: database
      - key: AP_REDIS_TYPE
        value: REDIS
      - key: AP_REDIS_HOST
        fromService:
          name: redis
          type: redis
          property: host
      - key: AP_REDIS_PORT
        fromService:
          name: redis
          type: redis
          property: port
      - key: AP_REDIS_PASSWORD
        fromService:
          name: redis
          type: redis
          property: password
      - key: AP_FRONTEND_URL
        value: https://your-app-name.onrender.com
      - key: AP_BACKEND_URL
        value: https://your-app-name.onrender.com
      - key: AP_JWT_SECRET
        generateValue: true
      - key: AP_ENCRYPTION_KEY
        generateValue: true
